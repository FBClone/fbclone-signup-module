<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">

<dom-module id = "fbclone-signup-module">
    <template>
        <style>
            :host {
                position: relative;
                left: 35%;
            }

            .signUp {
                margin-left: 5%;
                margin-right: 5%;
                margin-bottom: 5%;
            }

            #signUpForm {
                width: 25%;
            }

            #submit {
                border: 1px black solid;
                background-color: lightgray;
                margin-left: 69%;
                margin-top: 3%;
            }
        </style>

        <firebase-query
            id="query"
            app-name="[[appName]]"
            path="/system"
            data="{{account}}"></firebase-query>

        <div id = "signUpForm">
            <paper-input
                    label="First Name"
                    id="firstName"
                    class="signUp"
                    value="{{firstName}}"></paper-input>

            <paper-input
                    label="Last Name"
                    id="lastName"
                    class="signUp"
                    value="{{lastName}}"></paper-input>

            <paper-input
                    label="Age"
                    id="age"
                    class="signUp"
                    type="number"
                    value="{{age}}"></paper-input>

            <paper-input
                    label="Email"
                    id="email"
                    class="signUp"
                    value="{{email}}"></paper-input>

            <paper-button id="submit" on-tap="updateAccount">Submit</paper-button>
        </div>
    </template>

    <script>
        Polymer({
            is: "fbclone-signup-module",

            properties: {
                firstName: {
                    type: String,
                    notify: true
                },

                lastName: {
                    type: String,
                    notify: true
                },

                age: {
                    type: Number,
                    notify: true
                },

                email: {
                    type: String,
                    notify: true
                },

                account: {
                    type: Object,
                    notify: true,
                    value: {
                        'firstName': this.firstName,
                        'lastName': this.lastName,
                        'age': this.age,
                        'email': this.email
                    }
                }

            },

            submitForm: function() {
                this.fire('submit');
            },

            updateAccount: function(e) {
                var query = this.$$("#query");
                var ref = query.ref;
                var newInput = this.account;
                var key = e.target.getAttribute('key');
                var path = key + "/name";

                var newObj = {};
                newObj[path] = newInput;

                ref.update(newObj);
            }
        });
    </script>
</dom-module>